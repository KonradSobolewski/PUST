\chapter{Zadanie 5: Strojenie regulatora PID i DMC}

\section{Regulator PID}
\subsection{Wariant pierwszy}

Pierwszy wariant obejmuje oddzia³ywanie uchybu pierwszego wyjœcia na pierwszy sygna³ steruj¹cy, drugiego wyjœcia na na drugi sygna³ steruj¹cy. \\
Pierwszym krokiem strojenia regulatora jest wy³¹czenie drugiego wyjœcia obiektu, a nastêpnie dobranie parametrów regulatora wy³¹cznie dla pierwszego wyjœcia. Po uzyskaniu zadawalaj¹cych wyników analogicznie postêpuje z wyjœciem drugim. Po dostrojeniu obu torów uruchamiamy ca³y regulator i dokonujemy ewentualnych poprawek nastaw dla poprawy przebiegów. W trakcie strojenia obu wyjœæ zosta³a wykorzystana metoda in¿ynierska.\\
\\
Rozpoczêcie strojenia toru pierwszego wyjœcia rozpoczêliœmy od wprowadzenia regulatora $P_1$ w nieskoñczone oscylacje rys. \ref{oscylacje}. Efekt ten zosta³ uzyskany dla wzmocnienia o wartoœci $K_{k_1} = 4,35$.

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.35\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-5,ymax=6,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,250,500},
	ytick={-5,-4,-3,-2,-1,0,1,2,3,4,5,6},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu1_1_4.3500_Inf_0.0000_232.5771_487.8818.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.5,ymax=2.5,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/z4pidy1_1_4.3500_Inf_0.0000_487.8818.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad1_1.0000.txt};
	\legend{$Y_1$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Regulator $P_1$ ze sta³ymi oscylacjami}
	\label{oscylacje}
\end{figure}
\FloatBarrier
W nastêpnym kroku przeprowadziliœmy dobranie parametrów regulatora $PI_1$ rys. \ref{strojeniePI}. Przy wzmocnieniu $K_1 = 0,5K_{k_1}$ przeprowadziliœmy szereg testów i z poœród zilustrowanych wartoœci wybraliœmy $T_{i_1} = 12$ jako najlepszy wynik. Mo¿na zauwa¿yæ, i¿ przebieg wyjœcia dla wspomnianego parametru charakteryzuje siê najlepszym czasem regulacji przy stosunkowo niskim przeregulowaniu. Bior¹c pod uwagê wartoœæ b³êdów :
\begin{itemize}
	\item $T_i = 10$ = $168,88$,
	\item $T_i = 12$ = $168,41$,
	\item $T_i = 15$ = $167,98$,
\end{itemize}
zauwa¿amy, ¿e ró¿nice miêdzy nimi s¹ bardzo ma³e. Z tego powodu g³ównym aspektem wyboru by³a ocena jakoœciowa przebiegu. 

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=100,ymin=-0.5,ymax=3,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,50,100},
	ytick={0,1,2,3},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu1_1_2.1750_10.0000_0.0000_7.1811_168.8823.txt};
	\addplot[green,semithick] file {wykresy/z4pidu1_1_2.1750_12.0000_0.0000_6.9647_168.4141.txt};
	\addplot[orange,semithick] file {wykresy/z4pidu1_1_2.1750_15.0000_0.0000_6.8284_167.9822.txt};
	\nextgroupplot
	[
	xmin=0,xmax=100,ymin=0,ymax=1.5,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,50,100},
	ytick={0,0.5,1,1.5},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/z4pidy1_1_2.1750_10.0000_0.0000_168.8823.txt};
	\addplot[green,semithick] file {wykresy/z4pidy1_1_2.1750_12.0000_0.0000_168.4141.txt};
	\addplot[orange,semithick] file {wykresy/z4pidy1_1_2.1750_15.0000_0.0000_167.9822.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad1_1.0000.txt};
	\legend{$T_i = 10$,$T_i=12$,$T_i=15$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PI_1$}
	\label{strojeniePI}
\end{figure}
\FloatBarrier
W kolejnym kroku zosta³ dobrany parametr $T_{d_1}$ regulatora $PID_1$.
Z poœród zaprezentowanych wartoœci rys. \ref{strojeniePID} najlepszy przebieg o dobrym czasie regulacji, najni¿szym przeregulowaniu oraz zadawalaj¹cej p³ynnoœci regulacji uzyskaliœmy dla wartoœci $T_{d_1} = 0,5$.
Wartoœci b³êdów :
\begin{itemize}
	\item $T_d = 0,2$ = $6.39$,
	\item $T_d = 0,5$ = $5.81$,
	\item $T_d = 1$ = $5.43$,
\end{itemize}
Mimo, i¿ z oceny iloœciowej wynika najmniejsza wartoœæ b³êdu dla $T_{d_1} = 1$ postanowiliœmy pozostaæ przy wartoœci $T_{d_1} = 0,5$, gdy¿ niesie ze sob¹ wiêksze korzyœci.\\
Nastawy pierwszego toru wyjœcia regulatora $PID_1$ :
$$K = 2,175 , T_i = 12 , T_d = 0,5$$

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=100,ymin=-0.5,ymax=3,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,50,100},
	ytick={0,1,2,3},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu1_1_2.1750_12.0000_0.2000_6.3903_167.6768.txt};
	\addplot[green,semithick] file {wykresy/z4pidu1_1_2.1750_12.0000_0.5000_5.8197_166.9615.txt};
	\addplot[orange,semithick] file {wykresy/z4pidu1_1_2.1750_12.0000_1.0000_5.4349_166.5360.txt};
	\nextgroupplot
	[
	xmin=0,xmax=100,ymin=0,ymax=1.5,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,50,100},
	ytick={0,0.5,1,1.5},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/z4pidy1_1_2.1750_12.0000_0.2000_167.6768.txt};
	\addplot[green,semithick] file {wykresy/z4pidy1_1_2.1750_12.0000_0.5000_166.9615.txt};
	\addplot[orange,semithick] file {wykresy/z4pidy1_1_2.1750_12.0000_1.0000_166.5360.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad1_1.0000.txt};
	\legend{$T_d = 0.2$,$T_d=0.5$,$T_d=1$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PID_1$}
	\label{strojeniePID}
\end{figure}
\FloatBarrier

W tym etapie tor pierwszy zosta³ wy³¹czony, a przeszliœmy do strojenia drugiego toru wyjœcia. W tym celu wprowadziliœmy regulator $P_2$ w sta³e oscylacje dla $K_{k_2}=7,2$.

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-7,ymax=8,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,250,500},
	ytick={-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu2_1_7.2000_Inf_0.0000_132.0216_1054.7859.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.5,ymax=2.5,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/z4pidy2_1_7.2000_Inf_0.0000_1054.7859.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad2_1.0000.txt};
	\legend{$Y_2$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Regulator $P_2$ ze sta³ymi oscylacjami}
	\label{oscylacje2}
\end{figure}
\FloatBarrier

W nastêpnym kroku przeprowadziliœmy dobranie parametrów regulatora $PI_2$ rys. \ref{strojeniePI2}. Przy wzmocnieniu $K_2 = 0,5K_{k_2}$ przeprowadziliœmy szereg testów i z poœród zilustrowanych wartoœci wybraliœmy $T_{i_2} = 9$ jako najlepszy wynik. Mo¿na zauwa¿yæ, i¿ przebieg wyjœcia dla wspomnianego parametru charakteryzuje siê najlepszym czasem regulacji przy stosunkowo niskim przeregulowaniu. Bior¹c pod uwagê wartoœæ b³êdów :
\begin{itemize}
	\item $T_i = 5$ = $271.40$,
	\item $T_i = 9$ = $263.90$,
	\item $T_i = 12$ = $261.87$,
\end{itemize}
zauwa¿amy, ¿e najmniejszy wskaznik jakoœci uzyskaliœmy dla $T_{i_2} = 12$. Maj¹c na wzglêdzie kszta³t toru pozostaliœmy przy wartoœci $T_{i_2} = 9$. 

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=250,xmax=400,ymin=-1,ymax=5,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={250,300,350,400},
	ytick={0,1,2,3,4},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu2_1_3.6000_5.0000_0.0000_6.6356_278.0402.txt};
	\addplot[green,semithick] file {wykresy/z4pidu2_1_3.6000_9.0000_0.0000_5.5030_269.4109.txt};
	\addplot[orange,semithick] file {wykresy/z4pidu2_1_3.6000_13.0000_0.0000_5.3206_267.2076.txt};
	\nextgroupplot
	[
	xmin=250,xmax=400,ymin=0,ymax=2,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={250,300,350,400},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/z4pidy2_1_3.6000_5.0000_0.0000_278.0402.txt};
	\addplot[green,semithick] file {wykresy/z4pidy2_1_3.6000_9.0000_0.0000_269.4109.txt};
	\addplot[orange,semithick] file {wykresy/z4pidy2_1_3.6000_13.0000_0.0000_267.2076.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad2_1.0000.txt};
	\legend{$T_i = 5$,$T_i=9$,$T_i=13$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PI_2$}
	\label{strojeniePI2}
\end{figure}

\FloatBarrier
W kolejnym kroku zosta³ dobrany parametr $T_{d_2}$ regulatora $PID_2$.
Z poœród zaprezentowanych wartoœci rys. \ref{strojeniePID2} najlepszy przebieg o dobrym czasie regulacji, najni¿szym przeregulowaniu oraz zadawalaj¹cej p³ynnoœci regulacji uzyskaliœmy dla wartoœci $T_{d_2} = 0,5$.
Wartoœci b³êdów :
\begin{itemize}
	\item $T_d = 0,2$ = $4.95$,
	\item $T_d = 0,5$ = $4.48$,
	\item $T_d = 0,8$ = $4.35$,
\end{itemize}
Mimo, i¿ z oceny iloœciowej wynika najmniejsza wartoœæ b³êdu dla $T_{d_2} = 0,8$ postanowiliœmy pozostaæ przy wartoœci $T_{d_2} = 0,5$, gdy¿ niesie ze sob¹ wiêksze korzyœci.\\
Nastawy drugiego toru wyjœcia regulatora $PID_2$ :
$$K = 3,6 , T_i = 9 , T_d = 0,5$$

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=250,xmax=350,ymin=-1,ymax=10,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={250,300,350},
	ytick={0,1,2,3,4,5,6,7,8,9,10},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu2_1_3.6000_9.0000_0.2000_4.9524_266.6974.txt};
	\addplot[green,semithick] file {wykresy/z4pidu2_1_3.6000_9.0000_0.5000_4.4838_264.6678.txt};
	\addplot[orange,semithick] file {wykresy/z4pidu2_1_3.6000_9.0000_0.8000_4.3516_264.6085.txt};
	\nextgroupplot
	[
	xmin=250,xmax=350,ymin=0,ymax=1.5,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={250,300,350},
	ytick={0,0.5,1,1.5},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/z4pidy2_1_3.6000_9.0000_0.2000_266.6974.txt};
	\addplot[green,semithick] file {wykresy/z4pidy2_1_3.6000_9.0000_0.5000_264.6678.txt};
	\addplot[orange,semithick] file {wykresy/z4pidy2_1_3.6000_9.0000_0.8000_264.6085.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad2_1.0000.txt};
	\legend{$T_d = 0.2$,$T_d=0.5$,$T_d=0.8$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PID_2$}
	\label{strojeniePID2}
\end{figure}
\FloatBarrier

Po uruchomieniu obu dostrojonych torów wyjœcia regulatora $PID$ zauwa¿amy sta³e oscylacje w okolicach wartoœci zadanych rys. \ref{oscylacje12}.

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.3\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-5,ymax=6,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,250,500},
	ytick={-5,-4,-3,-2,-1,0,1,2,3,4,5,6},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu1_1_2.1750_12.0000_0.5000_134.3668_172.5572.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.5,ymax=2.5,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/z4pidy1_1_2.1750_12.0000_0.5000_172.5572.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad1_1.0000.txt};
	\legend{$Y_1$,$Y_{1_{zad}}$}
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-5,ymax=6,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,250,500},
	ytick={-5,-4,-3,-2,-1,0,1,2,3,4,5,6},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu2_1_3.6000_9.0000_0.5000_38.1905_172.5572.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.5,ymax=2.5,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/z4pidy2_1_3.6000_9.0000_0.5000_172.5572.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad2_1.0000.txt};
	\legend{$Y_2$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Oba regulatory PID}
	\label{oscylacje12}
\end{figure}
\FloatBarrier

Zgodnie z ide¹ metody in¿ynierskiej ponownie zmniejszyliœmy wzmocnienie obu regulatorów o po³owê. Uzyskane przebiegi zaprezentowane s¹ na rys. \ref{dobry1}. Widaæ, ¿e po dokonanych zmianach regulator pracuje prawid³owo. Obecne nastawy:
$$K_1 = 1,0875 , T_{i_1} = 12 , T_{d_1} = 0,5$$
$$K_2 = 1,8 , T_{i_2} = 9 , T_{d_2} = 0,5$$

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.29\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-1,ymax=2.5,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,250,500},
	ytick={-1,0,1,2},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu1_1_1.0875_12.0000_0.5000_25.5732_34.0364.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=0,ymax=2.5,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/z4pidy1_1_1.0875_12.0000_0.5000_34.0364.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad1_1.0000.txt};
	\legend{$Y_1$,$Y_{1_{zad}}$}
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-1,ymax=4,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,250,500},
	ytick={-1,0,1,2,3,4},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/z4pidu2_1_1.8000_9.0000_0.5000_8.4632_34.0364.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.2,ymax=1.2,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={0,250,500},
	ytick={-0.2,0,0.5,1,1.2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/z4pidy2_1_1.8000_9.0000_0.5000_34.0364.txt};
	\addplot[red,semithick] file {wykresy/z4pidyzad2_1.0000.txt};
	\legend{$Y_2$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Oba regulatory PID dostrojone}
	\label{dobry1}
\end{figure}

\FloatBarrier
\subsection{Wariant drugi}

Drugi wariant obejmuje oddzia³ywanie uchybu pierwszego wyjœcia na drugi sygna³ steruj¹cy, drugiego wyjœcia na na pierwszy sygna³ steruj¹cy. \\
Pierwszym krokiem strojenia regulatora jest wy³¹czenie drugiego wyjœcia obiektu, a nastêpnie dobranie parametrów regulatora wy³¹cznie dla pierwszego wyjœcia. Po uzyskaniu zadawalaj¹cych wyników analogicznie postêpuje z wyjœciem drugim. Po dostrojeniu obu torów uruchamiamy ca³y regulator i dokonujemy ewentualnych poprawek nastaw dla poprawy przebiegów. W trakcie strojenia obu wyjœæ zosta³a wykorzystana metoda in¿ynierska.\\
\\
Rozpoczêcie strojenia toru pierwszego wyjœcia rozpoczêliœmy od wprowadzenia regulatora $P_1$ w nieskoñczone oscylacje rys. \ref{oscylacje21}. Efekt ten zosta³ uzyskany dla wzmocnienia o wartoœci $K_{k_1} = 6.54$.

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-5,ymax=7,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,250,500},
	ytick={-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu1_2_6.5400_Inf_0.0000_1478.1470_1584.7486.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.5,ymax=2,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy2_2_0.0000_Inf_0.0000_1584.7486.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad2_1.0000.txt};
	\legend{$Y_2$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Regulator $P_1$ ze sta³ymi oscylacjami}
	\label{oscylacje21}
\end{figure}

\FloatBarrier
W nastêpnym kroku przeprowadziliœmy dobranie parametrów regulatora $PI_1$ rys. \ref{strojeniePI3}. Przy wzmocnieniu $K_1 = 0,5K_{k_1}$ przeprowadziliœmy szereg testów i z poœród zilustrowanych wartoœci wybraliœmy $T_{i_1} = 5$ jako najlepszy wynik. Bior¹c pod uwagê wartoœæ b³êdów :
\begin{itemize}
	\item $T_i = 10$ = $8,19$,
	\item $T_i = 5$ = $8,44$,
	\item $T_i = 4$ = $9,53$,
\end{itemize}
zauwa¿amy, ¿e najmniejszy b³¹d uzyskaliœmy dla $T_{i_1} = 10$, jednak¿e przebieg funkcji zachowuje siê doœæ niepokoj¹co (oscylacje pod wartoœci¹ zadan¹) zdecydowaliœmy siê zostaæ przy wartoœci $T_{i_1} = 5$.

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=250,xmax=400,ymin=-0.5,ymax=6,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={250,300,350,400},
	ytick={0,1,2,3,4,5,6},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu1_2_3.2700_10.0000_0.0000_2302.8120_2311.0089.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidu1_2_3.2700_5.0000_0.0000_2435.3201_2443.7685.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidu1_2_3.2700_4.0000_0.0000_2461.3135_2470.8506.txt};
	\nextgroupplot
	[
	xmin=250,xmax=400,ymin=0,ymax=2,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={250,300,350,400},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidy2_2_0.0000_Inf_0.0000_2311.0089.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy2_2_0.0000_Inf_0.0000_2443.7685.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidy2_2_0.0000_Inf_0.0000_2470.8506.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad2_1.0000.txt};
	\legend{$T_i = 10$,$T_i=5$,$T_i=4$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PI_1$}
	\label{strojeniePI3}
\end{figure}

\FloatBarrier
W kolejnym kroku zosta³ dobrany parametr $T_{d_1}$ regulatora $PID_1$.
Z poœród zaprezentowanych wartoœci rys. \ref{strojeniePID3} najlepszy przebieg o dobrym czasie regulacji, najni¿szym przeregulowaniu oraz zadawalaj¹cej p³ynnoœci regulacji uzyskaliœmy dla wartoœci $T_{d_1} = 0,8$.
Wartoœci b³êdów :
\begin{itemize}
	\item $T_d = 1$ = $6,50$,
	\item $T_d = 0,8$ = $6,64$,
	\item $T_d = 0,5$ = $7,04$,
\end{itemize}
Mimo, i¿ z oceny iloœciowej wynika najmniejsza wartoœæ b³êdu dla $T_{d_1} = 1$ postanowiliœmy pozostaæ przy wartoœci $T_{d_1} = 0,8$, gdy¿ niesie ze sob¹ wiêksze korzyœci.\\
Nastawy pierwszego toru wyjœcia regulatora $PID_1$ :
$$K = 3,27 , T_i = 5 , T_d = 0,8$$

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=250,xmax=400,ymin=-1,ymax=10,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={250,300,350,400},
	ytick={0,1,2,3,4,5,6,7,8,9,10},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu1_2_3.2700_5.0000_0.5000_2430.2153_2437.2622.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidu1_2_3.2700_5.0000_0.8000_2428.4114_2435.0504.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidu1_2_3.2700_5.0000_1.0000_2427.5850_2434.0856.txt};
	\nextgroupplot
	[
	xmin=250,xmax=400,ymin=0,ymax=2,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={250,300,350,400},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidy2_2_0.0000_Inf_0.0000_2437.2622.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy2_2_0.0000_Inf_0.0000_2435.0504.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidy2_2_0.0000_Inf_0.0000_2434.0856.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad2_1.0000.txt};
	\legend{$T_d = 0.5$,$T_d=0.8$,$T_d=1$,$Y_{2_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PID_2$}
	\label{strojeniePID3}
\end{figure}
\FloatBarrier

W tym etapie tor pierwszy zosta³ wy³¹czony, a przeszliœmy do strojenia drugiego toru wyjœcia. W tym celu wprowadziliœmy regulator $P_2$ w sta³e oscylacje dla $K_{k_2}=6,83$ rys. \ref{oscylacje22}.

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-5,ymax=7,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,250,500},
	ytick={-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu2_2_6.8300_Inf_0.0000_268.0077_558.7618.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.5,ymax=2,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy1_2_0.0000_Inf_0.0000_558.7618.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad1_1.0000.txt};
	\legend{$Y_1$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Regulator $P_2$ ze sta³ymi oscylacjami}
	\label{oscylacje22}
\end{figure}
\FloatBarrier
W nastêpnym kroku przeprowadziliœmy dobranie parametrów regulatora $PI_2$ rys. \ref{strojeniePI4}. Przy wzmocnieniu $K_2 = 0,5K_{k_2}$ przeprowadziliœmy szereg testów i z poœród zilustrowanych wartoœci wybraliœmy $T_{i_2} = 4$ jako najlepszy wynik. Mo¿na zauwa¿yæ, i¿ przebieg wyjœcia dla wspomnianego parametru charakteryzuje siê najlepszym czasem regulacji przy stosunkowo niskim przeregulowaniu. Bior¹c pod uwagê wartoœæ b³êdów :
\begin{itemize}
	\item $T_i = 2$ = $2,90$,
	\item $T_i = 4$ = $2,39$,
	\item $T_i = 10$ = $2,87$,
\end{itemize}
zauwa¿amy, ¿e najmniejszy wskaznik jakoœci uzyskaliœmy tak¿e dla $T_{i_2} = 4$. 

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=150,ymin=-1,ymax=5,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,50,100,150},
	ytick={-1,0,1,2,3,4,5},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu2_2_3.4150_10.0000_0.0000_274.3119_276.8034.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidu2_2_3.4150_4.0000_0.0000_280.6742_283.0688.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidu2_2_3.4150_2.0000_0.0000_282.5346_285.4378.txt};
	\nextgroupplot
	[
	xmin=0,xmax=150,ymin=0,ymax=2,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,50,100,150},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidy1_2_0.0000_Inf_0.0000_276.8034.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy1_2_0.0000_Inf_0.0000_283.0688.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidy1_2_0.0000_Inf_0.0000_285.4378.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad1_1.0000.txt};
	\legend{$T_i = 10$,$T_i=4$,$T_i=2$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PI_2$}
	\label{strojeniePI4}
\end{figure}

\FloatBarrier
W kolejnym kroku zosta³ dobrany parametr $T_{d_2}$ regulatora $PID_2$.
Z poœród zaprezentowanych wartoœci rys. \ref{strojeniePID4} najlepszy przebieg o dobrym czasie regulacji, najni¿szym przeregulowaniu oraz zadawalaj¹cej p³ynnoœci regulacji uzyskaliœmy dla wartoœci $T_{d_2} = 0,2$.
Przy wartoœci b³êdów:
\begin{itemize}
	\item $T_d = 0,3$ = $2,243$,
	\item $T_d = 0,2$ = $2,18$,
	\item $T_d = 0,1$ = $2,241$,
\end{itemize}
zauwa¿amy, ¿e najmniejszy wskaznik jakoœci uzyskaliœmy tak¿e dla $T_{d_2} = 0,2$. \\
Nastawy pierwszego toru wyjœcia regulatora $PID_2$ :
$$K = 3,415 , T_i = 4 , T_d = 0,2$$


\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.45\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=150,ymin=-1,ymax=5,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,50,100,150},
	ytick={-1,0,1,2,3,4,5},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu2_2_3.4150_4.0000_0.3000_280.6269_282.8724.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidu2_2_3.4150_4.0000_0.2000_280.6228_282.8103.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidu2_2_3.4150_4.0000_0.1000_280.6392_282.8805.txt};
	\nextgroupplot
	[
	xmin=0,xmax=150,ymin=0,ymax=2,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,50,100,150},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidy1_2_0.0000_Inf_0.0000_282.8724.txt};
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy1_2_0.0000_Inf_0.0000_282.8103.txt};
	\addplot[orange,semithick] file {wykresy/4pid2/z4pidy1_2_0.0000_Inf_0.0000_282.8805.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad1_1.0000.txt};
	\legend{$T_d = 0.3$,$T_d=0.2$,$T_d=0.1$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Strojenie regulatora $PID_2$}
	\label{strojeniePID4}
\end{figure}
\FloatBarrier

Po uruchomieniu obu torów regulatora okaza³o siê, ¿e obiekt jest niedzia³aj¹cy i po próbie dobrania lepszych nastaw rezultat nie uleg³ wiêkszym zmianom rys . \ref{chujowy1}.
\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.3\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,%ymin=-1,ymax=2.5,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,250,500},
%	ytick={-1,0,1,2},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu1_2_3.2700_5.0000_0.8000_4613278273964540100000000000.0000_16122629718609996000000000000.0000.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,%ymin=0,ymax=2.5,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={0,250,500},
%	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy2_2_3.4150_4.0000_0.2000_16122629718609996000000000000.0000.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad2_1.0000.txt};
	\legend{$Y_2$,$Y_{2_{zad}}$}
	\nextgroupplot
	[
	xmin=0,xmax=510,%ymin=-1,ymax=4,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,250,500},
%	ytick={-1,0,1,2,3,4},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu2_2_3.4150_4.0000_0.2000_11509351444645456000000000000.0000_16122629718609996000000000000.0000.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,%ymin=-0.2,ymax=1.2,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,250,500},
%	ytick={-0.2,0,0.5,1,1.2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy1_2_3.2700_5.0000_0.8000_16122629718609996000000000000.0000.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad1_1.0000.txt};
	\legend{$Y_1$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Oba regulatory PID w³¹czone}
	\label{chujowy1}
\end{figure}
\FloatBarrier
W celu poprawy zaistnia³ej sytuacji pos³u¿yliœmy siê funkcj¹ $fmincon$ do znalezienia rozwi¹zania optymalnego. Ku naszemu zdziwieniu funkcja ta nie podo³a³a zadaniu i zwrócony wynik zosta³ zaprezentowany na rys. \ref{chujowy2}. \\
Wniosek :\\
Dla naszego obiektu wariant drugi jest nieskuteczny.

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 4,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.28\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-1,ymax=2.5,
	xlabel={$k$},
	ylabel={$U_1$},
	xtick={0,250,500},
	ytick={-1,0,1,2},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu1_2_0.0002_4.3332_1.0107_2.4565_286.0273.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=0,ymax=2.5,
	xlabel={$k$},
	ylabel={$Y_2$},
	xtick={0,250,500},
	ytick={0,0.5,1,1.5,2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy2_2_4.0388_3.5138_0.1871_286.0273.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad2_1.0000.txt};
	\legend{$Y_2$,$Y_{2_{zad}}$}
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-1,ymax=4,
	xlabel={$k$},
	ylabel={$U_2$},
	xtick={0,250,500},
	ytick={-1,0,1,2,3,4},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/4pid2/z4pidu2_2_4.0388_3.5138_0.1871_283.5709_286.0273.txt};
	\nextgroupplot
	[
	xmin=0,xmax=510,ymin=-0.2,ymax=1.2,
	xlabel={$k$},
	ylabel={$Y_1$},
	xtick={0,250,500},
	ytick={-0.2,0,0.5,1,1.2},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[green,semithick] file {wykresy/4pid2/z4pidy1_2_0.0002_4.3332_1.0107_286.0273.txt};
	\addplot[red,semithick] file {wykresy/4pid2/z4pidyzad1_1.0000.txt};
	\legend{$Y_1$,$Y_{1_{zad}}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Oba regulatory PID w³¹czone}
	\label{chujowy2}
\end{figure}
\section{Regulator DMC}