\chapter{Zadanie 5: Regulacja obiektu z uwzglêdniem wp³ywu zak³óceñ}

\section{Zmiany w stosunku do podstawowej wersji regulatora analitycznego}
Uwzglêdnie zak³óceñ w regualtorze $DMC$ wymaga wprowadzenia kilku zmian w jego algorytmie.

Konieczne bêdzie oblicznie macierzy $M^{zP}$, danej wzorem:


\begin{equation}
\boldsymbol{M^{zP}}=\left[
\begin{array}
{ccccc}
sz_{1} & sz_{2}-sz_{1} & sz_{3}-sz_{2} & \ldots & sz_{D_z}-sz_{D_z-1}\\
sz_{2} & sz_{3}-sz_{1} & sz_{4}-sz_{2} & \ldots & sz_{D_z+1}-sz_{D_z-1}\\
\vdots & \vdots & \vdots & \ddots & \vdots\\
sz_{N} & sz_{N+1}-sz_{1} & sz_{N+2}-sz_{2} & \ldots &  sz_{N+D_z-1}-sz_{D_z-1}
\end{array}
\right]_{\mathrm{NxDz}}
\label{MPzm}
\end{equation}

Macierz ta pos³u¿y nam do wyznaczenia wektora $k_z$:

\begin{equation}
k_z=kM^{zP}
\label{ku}
\end{equation}

Uwzglêdnienie zak³óceñ w algorytmie zmienia sposób obliczania $\triangle u(k|k)$ - we wzorze zawarta jest teraz obliczon¹ powy¿ej wartoœæ $k_z$:

\begin{equation}
\triangle u(k|k)=k_ee(k)-k_u\triangle\boldsymbol U^P-k_z\triangle\boldsymbol Z^P
\label{dukkz}
\end{equation}

Powy¿sza zmiana wynika bezpoœrednio ze zmiany w obliczaniu $Y^0$:

\begin{equation}
Y^0(k)=Y(k)+M^P\triangle U^P(k)+M^{zP}\triangle  Z^P(k)
\label{Y0z}
\end{equation}

\section{Dobór parametru Dz}

Wartoœæ parametru  $Dz$ regulatora $DMC$ odczytaliœmy z wykresu aproksymowanej odpowiedzi skokowej toru zak³ócenie-wyjœcie procesu:

\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{axis}[
	width=0.9\textwidth,
	xmin=0,xmax=300,ymin=0,ymax=0.15,
	xlabel={$k$},
	ylabel={$SZ(k)$},
	xtick={0,50,100,150,200,250,300},
	ytick={0,0.05,0.10,0.15},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/aprskok.txt};
	\end{axis}
	\end{tikzpicture}
	\caption{Aproksymowana odpowiedŸ skokowa toru zak³ócenie-wyjœcie}
	\label{skok}
\end{figure}


Widaæ na nim, ¿e wartoœæ funckji aproksymuj¹cej dla $k > 250$ zmienia siê w sposób nieznaczny. Z tego powodu przyjêliœmy wartoœæ horyzontu dynamiki $Dz = 250$.


\section{Porównanie jakoœci regulacji z i bez uwzglêdnienia zak³óceñ}

Regulator $DMC$ korzysta z aproksymowanych odpowiedzi skokowych $s$ i $sz$ uzyskanych w punkcie 3.

Wykres \ref{por} przedstawia przebiegi wejœcia i wyjœcia obiektu sterowanego przy pomocy regulatgora DMC w wersji z kolejno nieuwzglêdnieniem ($U(k), Y(k)$) i uwzglêdnieniem ($Uz(k), Yz(k)$) mierzonych zak³óceñ.
\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 3,vertical sep={2 cm}},
width=0.9\textwidth,height=0.5\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=910,ymin=26,ymax=63,
	xlabel={$k$},
	ylabel={$U(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900},
	ytick={26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66},
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[blue,semithick] file {wykresy/dmc5_u0.txt};
	\addplot[green,semithick] file {wykresy/dmc5_u1.txt};
	\legend{$U(k)$,$Uz(k)$}
	\nextgroupplot
	[
	xmin=0,xmax=910,ymin=36,ymax=43,
	xlabel={$k$},
	ylabel={$Y(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900},
	ytick={36,36.5,37,37.5,38,38.5,39,39.5,40,40.5,41,41.5,42,42.5,43},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east
	]
	\addplot[blue,semithick] file {wykresy/dmc5_y0.txt};
	\addplot[green,semithick] file {wykresy/dmc5_y1.txt};
	\addplot[orange,semithick] file {wykresy/dmc5_yzad.txt};
	\legend{$Y(k)$,$Yz(k)$,$Y^{zad}(k)$}
	\nextgroupplot
	[
	xmin=0,xmax=910,ymin=0,ymax=40,
	xlabel={$k$},
	ylabel={$Z$},
	xtick={0,100,200,300,400,500,600,700,800,900},
	ytick={0,10,20,30,40},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[red,semithick] file {wykresy/dmc5_z.txt};
	\legend{$Z(k)$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Porównanie regulacji z i bez uwzglêdniania zak³óceñ w algorytmie sterowania}
	\label{por}
\end{figure}

Widaæ znacz¹c¹ poprawê sterowania, gdy zak³ócenia s¹ uwzglêdniane w algorytmie $DMC$.
Wizualnie oceniaj¹c przebiegi, w okresach nastêpuj¹cych po zmianie sygna³u zak³ócenia, dla algorytmu, który nie uwzglêdnia zak³óceñ, widoczne s¹ du¿e przeregulowania, których brak w wersji uwzglêdniaj¹cej te zak³ócenia.

Potwierdzaj¹ to poni¿sze wartoœci b³êdów:

WskaŸnik regulacji, gdy zak³ócenia nie s¹ brane pod uwagê: $E = 260,5226$
\

WskaŸnik regulacji, gdy zak³ócenia s¹ brane pod uwagê: $E = 202,2884$

St¹d wniosek, ¿e gdy jest to mo¿liwe, nale¿y stosowaæ wersjê regulatora uwzglêdniaj¹c¹ zak³ócenia.
