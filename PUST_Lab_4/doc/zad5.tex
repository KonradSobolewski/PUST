\chapter{Laboratorium: Zadanie 5: Strojenie regulatora PID i DMC}
Strojenie regulataora odby³o siê na podstawie oceny regulacji dla zaproponowaej trajektorii zmian sygna³ów zadanych sk³adaj¹cej siê z szeœciu skoków. Wartoœci zadane zosta³y tak dobrane, aby za ka¿dym razem by³a inna wartoœæ skoku.

\section{Regulator PID}

\subsection{Pocz¹tkowe nastawy}
Nastawy regulatora PID zosta³y dobrane eksperymentalnie. Sugeruj¹c siê nastawami otrzymanymi na poptrzednich laboratoriach, jako wartoœci pocz¹tkowe przyjêliœmy nastawy: $K_p = 5, T_i = 75, T_d = 1.25$. Na rys. \ref{PID1} mo¿na obserwowaæ pracê regulatora z takimi nastawami. Jak widaæ, nie s¹ to nastawy optymalne; regulator jest nieskuteczny. Dla dolnego przedzia³u dzia³a lepiej, w górnym jest zdecydowanie zbyt s³aby. B³¹d wyjœcia $Y$ wyniós³: $E = 5042,6750$.



\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 2,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.5\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=1210,ymin=-5,ymax=105,
	xlabel={$k$},
	ylabel={$U(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900,1000,1100,1200},
	ytick={0,10,20,30,40,50,60,70,80,90,100},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/lab4pidU_5.0000_75.0000_1.2500.txt};
	\nextgroupplot
	[
	xmin=0,xmax=1210,ymin=36,ymax=46,
	xlabel={$k$},
	ylabel={$Y(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900,1000,1100,1200},
	ytick={36,37,38,39,40,41,42,43,44,45,46},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=north east,
	]
	\addplot[red,semithick] file{wykresy/lab4pidY_5.0000_75.0000_1.2500.txt}; 
	\addplot[orange,semithick,densely dashed] file{wykresy/lab4Yzad.txt}; 
	\legend{$Y$,$Y^{zad}$,$Y_2$,}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Dzia³anie algorytmu PID przy pocz¹tkowych nastawach  $K_p = 5, T_i = 75, T_d = 1.25$} 
	\label{PID1}
\end{figure}
\FloatBarrier

\subsection{Korygowanie  nastaw}
Aby poprawiæ osi¹gi regualtora w przedziale wy¿szych wartoœci temperatury, a tak¿e poprawiæ zbyt wolna regulacjê temperatury widoczn¹ w pobli¿u $k = 1100$, postanowiliœmy zwiêkszyæ wp³yw cz³onu ca³kuj¹cego, obni¿aj¹c $T_i$ do wartoœci $T_i = 65$ oraz zmniejszyæ wp³yw cz³onu ró¿niczkuj¹cego - nowe  $T_d = 1$. Wzmocnienie nie by³o zmieniane, gdy¿ obawialiœmy siê pogorszenia regulacji w dolnym przedziale temperatur. Tak wiêc nowe nastawy to: $K_p = 5, T_i = 65, T_d = 1$. Dla takich nastaw osi¹gnêliœmy przebiegi jak na \ref{PID2}. 


\begin{figure}[tb]
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 2,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.6\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=1210,ymin=-5,ymax=105,
	xlabel={$k$},
	ylabel={$U(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900,1000,1100,1200},
	ytick={0,10,20,30,40,50,60,70,80,90,100},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/lab4pidU_5.0000_65.0000_1.0000.txt};
	\nextgroupplot
	[
	xmin=0,xmax=1210,ymin=36,ymax=46,
	xlabel={$k$},
	ylabel={$Y(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900,1000,1100,1200},
	ytick={36,37,38,39,40,41,42,43,44,45,46},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=north east,
	]
	\addplot[red,semithick] file{wykresy/lab4pidY_5.0000_65.0000_1.0000.txt}; 
	\addplot[orange,semithick,densely dashed] file{wykresy/lab4Yzad.txt}; 
	\legend{$Y$,$Y^{zad}$,$Y_2$,}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Dzia³anie algorytmu PID przy zmodyfikowanych nastawach  $K_p = 4, T_i = 65, T_d = 1$} 
	\label{PID2}
\end{figure}
\FloatBarrier

Otrzymany regulator zapewnia lepsz¹ jakoœæ regulacji - b³¹d wyjœcia $Y$ siê zmniejszy³ i wyniós³: $E = 42436,6750$. Chocia¿ wy¿sza ca³ka pogorszy³a regulacjê w dolnym zakresie regulacji, to regulator osi¹ga teraz szybciej wartoœæ zadan¹ tak¿e w wy¿szym zakresie. Obserwujemy jednak wci¹¿ uchyb ustalony przy skoku z ok. 44 stopni na ok. 37 stopnie.

\section{Laboratorium: Regulator DMC}

Nastêpnie próbowaliœmy zastosowaæ do nieliniowego obiektu, jakim by³o stanowisko grzewcze, regulacjê DMC. Do u¿ycia w modelu wybraliœmy odpowiedŸ skokow¹ przy $dU = 15$.

\subsection{Pocz¹tkowe nastawy}
Nastawy regulatora DMC zosta³y dobrane eksperymentalnie. Jako wartoœci pocz¹tkowe przyjêliœmy nastawy $N = 300$, $Nu = 300$, $\lambda = 0.5$. Wartoœæ $300$ wynika z obserwacji obiektu - bezpiecznie za³o¿yliœmy, ¿e tyle wynosi jego horyzont dynamiki. Obiekt ten nie jest wra¿liwy na nag³e zmiany sterowañ a tak¿e na poprzednich laboratoriach lambda przyjmowa³a ma³e wartoœci - dlatego zdecydowaliœmy na pocz¹tek przyj¹æ $\lambda = 0.5$. Na rys. \ref{DMC_begin} mo¿na obserwowaæ pracê regulatora z takimi nastawami. Regulator dzia³a poprawnie, z pewnoœci¹ lepiej ni¿ regulator PID; zarówno przebiegi wyjœcia s¹ bli¿sze wartoœci zadanej jak i sterowania s¹ ³agodniejsze. Nie s¹ to jednak nastawy optymalne; regulator powienien dzia³aæ szybciej w wy¿szym zakresie temperatur. B³¹d wyjœcia, znacz¹co mniejszy ni¿ dla regulatoar PID wyniós³ $E = 3513,38$.
	\begin{figure}
	\centering
	\begin{tikzpicture}
	\begin{groupplot}[group style={group size=1 by 2,vertical sep={2 cm}},
	width=0.9\textwidth,height=0.6\textwidth]
	\nextgroupplot
	[
	xmin=0,xmax=1210,ymin=-5,ymax=105,
	xlabel={$k$},
	ylabel={$U(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900,1000,1100,1200},
	ytick={0,10,20,30,40,50,60,70,80,90,100},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=south east,
	]
	\addplot[blue,semithick] file {wykresy/lab4dmcU_300_0.5000.txt};
	\nextgroupplot
	[
	xmin=0,xmax=1210,ymin=36,ymax=46,
	xlabel={$k$},
	ylabel={$Y(k)$},
	xtick={0,100,200,300,400,500,600,700,800,900,1000,1100,1200},
	ytick={36,37,38,39,40,41,42,43,44,45,46},
	y tick label style={/pgf/number format/1000 sep=},
	legend pos=north east,
	]
	\addplot[red,semithick] file {wykresy/lab4dmcY_300_0.5000.txt};
	\addplot[orange,semithick,densely dashed] file{wykresy/lab4Yzad.txt}; 
	\legend{$Y$,$Y^{zad}$}
	\end{groupplot}
	\end{tikzpicture}
	\caption{Dzia³anie algorytmu DMC przy pocz¹tkowych nastawach  $N = 300$, $Nu = 300, \lambda = 0.5$} 
	\label{DMC_begin}
	\end{figure}
	\FloatBarrier

\section{Korekta parametru Nu}
Nastêpnie przyst¹piliœmy do zmian nastaw: parametr N pozostawiliœmy bez zmian, jako ¿e zarówno teoria jak i nasza praktyka wskazywa³y, ¿e jego zmniejszanie, jeœli w ogóle, prowadzi³o do minimalnych zysków w jakoœci sterowania. Gdyby by³ to obiekt szybszy lub dzia³aj¹cy w wymagaj¹cym œrodowisku, mo¿na by rozwa¿yæ skrócenie tej wartoœci w celu zmniejszenia z³o¿onoœci obliczeniowej, jednak dla okresu próbkowania $Tp = 1$ nie jest to konieczne. 
Wykonaliœmy dwukrotnie eksperyment kolejno dla wartoœci $Nu = 150$ (rys. \ref{DMC_p2}) oraz $Nu = 100$ (rys. \ref{DMC_p3}). 
B³êdy w pierwszym eksperymencie osi¹gnê³y wartoœci: dla $Y_1$: $E_1 = 454,2170$, dla $Y_2$: $E_2 = 439,2227$. £¹czny: $E = 893,4397$.

Natomiast za drugim razem: dla $Y_1$: $E_1 = 375,6482$, dla $Y_2$: $E_2 = 431,5992$. £¹czny: $E = 807,2474$.


\section{Korekta parametru $\lambda$}
Jako ostatni zmieniony zosta³ parametr $\lambda$.
W celu poprawy szybkoœci sterowania zmiejszyliœmy jego wartoœæ o po³owê (rys. \ref{DMC_lambda}). 
Finalnie, b³êdy osi¹gnê³y wartoœci: dla $Y_1$: $E_1 = 311,0436$, dla $Y_2$: $E_2 = 407,5791$. £¹czny: $E = 718,6227$.



\section{Podsumowanie}
Tak jak nale¿a³o siê spodziewaæ, regulator DMC w stosunku do regulatora PID zapewnia lepsz¹ regulacjê. Zarówno wskaŸnik jakoœci regulacji (dla DMC: $E = 718,6227$, dla PID: $E = 911,1790$) jak i wizualna ocena przebiegów wyjœæ i sterowania jednoznacznie wskazuj¹ algorytm DMC jako lepszy regulator obiektu grzewczego w laboratorium o dwóch wejœciach i dwóch wyjœciach.

